---
layout: page
title: ReverseCNN
description: Saliency heatmaps for CNNs in radiology.
img: assets/img/proj/reverse_thumbnail.png
importance: 3
github: https://github.com/cynthia9chen/reverse-CNN
category: research
---

<!-- https://docs.google.com/document/d/1nlTzhBqsH08EW5pw6BPjItdNZZqnVVDIfi1HAb0XoQA/edit#heading=h.ethmyocbc4cz -->

July 12, 2017

<b>Objective: Given a pre-trained CNN for classifying radiology images, create a heatmap that details which areas of an input image are the most important for classification.</b>

Languages used: MATLAB, Python.

Image produced by occlusion script (version 1): a black square occlusion that covers part of an x-ray scan of an ankle and iterates over entire image.

<div class="row justify-content-sm-center">
    <div class="col-sm-4 mt-3 mt-md-0">
        {% include figure.html path="assets/img/proj/reverse_v1.png" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>

Images produced by overlap script (version 2): basic heatmap that is generated by just the pixel value of an image (left picture); the original x-ray scan image (right picture).
<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        {% include figure.html path="assets/img/proj/reverse_v2.png" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>

Images produced by final heatmap script (version 3): a complete heatmap that shows how important a part of an image is to the classification result of the specific image. This is generated by combining both version 1 and version 2 and incorporating the pre-trained CNN.
<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        {% include figure.html path="assets/img/proj/reverse_v3.png" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>

<!-- Original Image
Heatmap
Classification 


Foot, Lateral


Ankle, Lateral


Elbow, Lateral


Ankle, AP -->


Generating occlusion heatmaps for the top 3 classes:

I also wrote code to generate a figure that includes the original image, along with occlusion heatmaps that were generated for the top 3 highest probability classes. As shown below, each heatmap (arranged left to right) was calculated with the same algorithm as described above. Above each image is a label that shows what class the probability was shown for.


<div class="row justify-content-sm-center">
    <div class="col-sm-10 mt-3 mt-md-0">
        {% include figure.html path="assets/img/proj/reverse.png" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    Example (elbow x-ray)
</div>